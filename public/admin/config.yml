backend:
  name: github
  repo: originalarchive/oa-site
  branch: main
  base_url: https://coffee-cms-auth.ken-marlow.workers.dev
  auth_endpoint: auth
  use_graphql: false

media_folder: "public/images/uploads"
public_folder: "/images/uploads"

collections:
  - name: "coffee"
    label: "Coffee Logs"
    folder: "src/content/coffee"
    create: true
    delete: true # [cite: 2026-01-22]
    media_folder: ""
    public_folder: ""
    # This forces the internal list logic to Descending for the UI
    sort: { field: "roastDate", direction: "Descending" }
    sortable_fields: ["commit_date", "roastDate", "name", "roaster"]
    view_groups: 
      # Grouping by a custom year field we can control [cite: 2026-02-05]
      - { label: "Year", field: "year" }
      - { label: "Status", field: "status" }
    summary: "{{name}} | {{roaster}} | {{status}} | {{roastDate}}"
    path: "{{year}}/{{slug}}"
    slug: "{{slug}}"
    fields:
      - { label: "Roast Date", name: "roastDate", widget: "datetime", date_format: "YYYY-MM-DD", time_format: false, required: true }
      # Changed from 'hidden' to 'string' so you can manually put '2026' to ensure it's at the top [cite: 2026-02-05]
      - { label: "Group Year", name: "year", widget: "string", hint: "Type 2026 to group correctly" }
      - { label: "Name", name: "name", widget: "string" }
      - { label: "Roaster", name: "roaster", widget: "string" }
      - label: "Status"
        name: "status"
        widget: "select"
        # We use '01_' because the CMS always puts 0 before 1 in groups
        options: 
          - { label: "Open", value: "01_Open" }
          - { label: "Finished", value: "02_Finished" }
        required: true
      - { label: "Roaster URL", name: "roasterUrl", widget: "string", required: false }
      - { label: "Origin", name: "origin", widget: "string" }
      - { label: "Date Brewed", name: "dateBrewed", widget: "datetime", date_format: "YYYY-MM-DD", time_format: false, required: false }
      # ... (rest of coffee fields)

  - name: "articles"
    label: "Articles"
    folder: "src/content/articles"
    create: true
    delete: true # [cite: 2026-01-22]
    media_folder: ""
    public_folder: ""
    path: "{{slug}}/index"
    extension: "md"
    format: "frontmatter"
    slug: "{{slug}}"
    summary: "{{title}} | {{date}}"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Date", name: "date", widget: "datetime", date_format: "YYYY-MM-DD" }
      - { label: "Body Content", name: "body", widget: "markdown" }
      - { label: "Description", name: "description", widget: "text", required: false }
      - { label: "Draft", name: "draft", widget: "boolean", default: false, required: false }
      - { label: "Tags", name: "tags", widget: "list", required: false }