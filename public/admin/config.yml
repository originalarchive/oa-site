backend:
  name: github
  repo: originalarchive/oa-site
  branch: main
  base_url: https://coffee-cms-auth.ken-marlow.workers.dev
  auth_endpoint: auth
  use_graphql: false

# Global CMS setting preserved
media_folder: "public/images/uploads"
public_folder: "/images/uploads"

collections:
  - name: "coffee"
    label: "Coffee Logs"
    folder: "src/content/coffee"
    create: true
    delete: true
    extension: "md"
    format: "frontmatter"
    path: "{{year}}/{{slug}}"
    slug: "{{name}}"
    summary: "{{name}} - {{roaster}} ({{roastDate}})"
    sortable_fields: ["roastDate", "name"]
    view_filters:
      - label: "Currently Open"
        field: status
        pattern: "Open"
      - label: "Finished / Stashed"
        field: status
        pattern: "Finished"
    fields:
      - { label: "Draft", name: "draft", widget: "boolean", default: false }
      - { label: "Roast Date", name: "roastDate", widget: "datetime", date_format: "YYYY-MM-DD", time_format: false, required: true }
      - { label: "Year", name: "year", widget: "hidden", default: "{{year}}" } 
      - { label: "Name", name: "name", widget: "string", required: true }
      - { label: "Roaster", name: "roaster", widget: "string", required: true }
      - { label: "Status", name: "status", widget: "select", options: ["Open", "Finished"], required: true }
      - { label: "Origin", name: "origin", widget: "string", required: true }
      # Image area for Coffee using Cloudinary support
      - { label: "Coffee Image", name: "image", widget: "image", media_library: { config: { multiple: false } } }
      - name: "rating"
        label: "Rating"
        widget: "object"
        fields:
          - { label: "Flavor (0-5)", name: "flavor", widget: "number", value_type: "int", min: 0, max: 5 }
          - { label: "Body (0-5)", name: "body", widget: "number", value_type: "int", min: 0, max: 5 }
          - { label: "Acidity (0-5)", name: "acidity", widget: "number", value_type: "int", min: 0, max: 5 }
          - { label: "Overall", name: "overall", widget: "select", options: ["Meh", "Good", "Great", "TBC"], default: "TBC" }
      - { label: "Body Content", name: "body", widget: "markdown", required: false }

  - name: "articles"
    label: "Articles"
    folder: "src/content/articles"
    create: true
    nested: { depth: 2 } # Surgical depth for /folder/index.md structure
    path: "{{slug}}/index"
    summary: "{{title}} ({{pubDate}})"
    sortable_fields: ["pubDate", "title"]
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Description", name: "description", widget: "string" }
      - { label: "Pub Date", name: "pubDate", widget: "datetime", date_format: "YYYY-MM-DD", time_format: false }
      # Image area for Articles using folder-relative uploads
      - { label: "Featured Image", name: "image", widget: "image" }
      - { label: "Draft", name: "draft", widget: "boolean", default: false }
      - { label: "Body", name: "body", widget: "markdown" }