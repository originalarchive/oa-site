backend:
  name: github
  repo: originalarchive/oa-site
  branch: main
  base_url: https://coffee-cms-auth.ken-marlow.workers.dev
  auth_endpoint: auth
  use_graphql: false

# Satisfies the mandatory schema requirement
media_folder: "public/images/uploads"
public_folder: "/images/uploads"

collections:
  - name: "coffee"
    label: "Coffee Logs"
    folder: "src/content/coffee"
    # REMOVED 'nested' - this is what was causing the sidebar ghosts
    create: true
    delete: true # [cite: 2026-01-22]
    # This groups them by the year folder visually in the list [cite: 2026-02-05]
    view_groups: [{ label: "Year", field: "year" }]
    summary: "{{name}} | {{roaster}} | {{status}}"
    # Matches: src/content/coffee/2025/name.md
    path: "{{year}}/{{slug}}" 
    slug: "{{slug}}"
    fields:
      - { label: "Year", name: "year", widget: "string", hint: "e.g. 2025" }
      - { label: "Name", name: "name", widget: "string" }
      - { label: "Roaster", name: "roaster", widget: "string" }
      # ... (include all your other coffee fields here)

  - name: "articles"
    label: "Articles"
    folder: "src/content/articles"
    # Nested stays here because articles ARE in subfolders
    nested: { depth: 1 } 
    create: true
    delete: true # [cite: 2026-01-22]
    filter: { field: "extension", value: "md" }
    summary: "{{title}} | {{date}}"
    # Matches: src/content/articles/slug/index.md
    path: "{{slug}}/index" 
    format: "frontmatter"
    slug: "{{slug}}"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Date", name: "date", widget: "datetime", date_format: "YYYY-MM-DD" }
      - { label: "Body Content", name: "body", widget: "markdown" }
      # ... (include your other article fields here)