---
import { getCollection } from "astro:content";
import PageLayout from "@layouts/PageLayout.astro";
import ArrowCard from "@components/ArrowCard.astro";
import PhotoGalleryGrid from "@components/PhotoGalleryGrid.astro";
import SocialLinks from "@components/SocialLinks.astro";
import { SITE } from "@consts";

const articles = (await getCollection("articles"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);
---

<PageLayout title={SITE.TITLE} description={SITE.DESCRIPTION}>
  
  <!-- Hero Section -->
  <section class="animate mb-12">
    <img 
      src="/hero.png" 
      alt="Hero image" 
      class="w-[40vh] h-[40vh] object-cover rounded-lg"
    />
  </section>

  <!-- Latest Articles -->
  <section class="animate mb-16">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-semibold">Latest Articles</h2>
      <a href="/articles" class="text-sm opacity-60 hover:opacity-100 transition-opacity">
        View all â†’
      </a>
    </div>
    <ul class="space-y-4">
      {articles.map((article) => (
        <li>
          <ArrowCard entry={article} />
        </li>
      ))}
    </ul>
  </section>

  <!-- Featured Photo Galleries -->
  <PhotoGalleryGrid />

  <!-- Social Links Footer -->
  <section class="animate mt-16 pt-8 border-t border-black/10 dark:border-white/20">
    <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-sm opacity-60">Connect with me</p>
      <SocialLinks />
    </div>
  </section>

</PageLayout>