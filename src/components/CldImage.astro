---
// src/components/CldImage.astro
interface Props {
  publicId: string;
  alt: string;
  width?: number;
  height?: number;
  class?: string;
}

const { 
  publicId, 
  alt, 
  width = 800, 
  height, 
  class: className 
} = Astro.props;

// Replace 'your-cloud-name' with your actual Cloudinary Cloud Name
const cloudName = "your-cloud-name";

// Construct the transformation URL
// f_auto: best format (WebP/AVIF), q_auto: best compression, w_: width
const baseUrl = `https://res.cloudinary.com/${cloudName}/image/upload`;
const transformations = `f_auto,q_auto,w_${width}${height ? `,h_${height},c_fill` : ''}`;
const src = `${baseUrl}/${transformations}/${publicId}`;
---

<img 
  src={src} 
  alt={alt} 
  width={width} 
  height={height} 
  class={className}
  loading="lazy"
  decoding="async"
/>