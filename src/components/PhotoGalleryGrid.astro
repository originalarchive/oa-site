---
import { Image } from 'astro:assets';
const { photos } = Astro.props;
---

<div class="grid grid-cols-3 gap-4">
  {photos.map((photo) => {
    // Logic: Use external URL if it exists, otherwise use local route
    const isExternal = photo.data.type === "external";
    const targetUrl = isExternal ? photo.data.url : `/photos/${photo.slug}`;
    const targetAttr = isExternal ? "_blank" : "_self";

    return (
      <a href={targetUrl} target={targetAttr} class="group relative block aspect-square overflow-hidden rounded-lg">
        <Image 
          src={photo.data.thumbnail} 
          alt={photo.data.title}
          width={600}
          height={600}
          class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"
        />
        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
          <span class="text-white text-xs font-bold uppercase tracking-widest">
            {isExternal ? "View Portfolio" : "View Gallery"}
          </span>
        </div>
      </a>
    )
  })}
</div>